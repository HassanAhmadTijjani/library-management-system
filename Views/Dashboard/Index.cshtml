@using LibraryManagement.Models


@{
    ViewData["Title"] = "Dashboard";
}
<div class="mx-auto my-3">
    <div class="pt-5 px-2">
        <h2 class="text-center text-primary fw-bold fs-1 mb-3  ">Welcome to HAT book store!</h2>
        <p>A place of wide variety of books, We provide our customers with digitalize wide range of books.</p>
    </div>
</div>
<div class="row mt-5">
    <div class="col-md-4 mb-4">
        <div class="card kard kard-primary text-center border-primary">
            <div class="card-body">
                <i class="bi bi-book" style="font-size: 2rem;"></i>
                <h2>@ViewData["TotalBooks"]</h2>
                <p>Total Books </p>
            </div>
        </div>
    </div>
    @* Available Books *@
    <div class="col-md-4 mb-4">
        <div class="card text-center kard kard-success border-success">
            <div class="card-body ">
                <i class="bi bi-book" style="font-size: 2rem;"></i>
                <h2>@ViewData["AvailableBooks"]</h2>
                <p>Available Books</p>
            </div>
        </div>
    </div>
    @* Borrowed Books *@
    <div class="col-md-4 mb-4">
        <div class="card text-center kard kard-danger border-danger">
            <div class="card-body ">
                <i class="bi bi-book" style="font-size: 2rem;"></i>
                <h2>@ViewData["BorrowedBooks"]</h2>
                <p>Borrowed Books</p>
            </div>
        </div>
    </div>
</div>
@* Second Row *@
<div class="row">
    <div class="col-md-4 mb-4">
        <div class="card text-center kard kard-info border-info">
            <div class="card-body">
                <i class="bi bi-person" style="font-size: 2rem;"></i>
                <h2>@ViewData["TotalMembers"]</h2>
                <p>Total Members</p>
            </div>
        </div>
    </div>

    @* OverDue Books *@
    <div class="col-md-4 mb-4">
        <div class="card text-center kard kard-warning border-warning">
            <div class="card-body">
                <i class="bi bi-clock" style="font-size: 2rem;"></i>
                <h2>@ViewData["OverDueBooks"]</h2>
                <p>OverDue Books</p>
            </div>
        </div>
    </div>

    @* Todays Borrow *@
    <div class="col-md-4 mb-4">
        <div class="card text-center kard kard-secondary border-secondary">
            <div class="card-body">
                <i class="bi bi-calendar-check" style="font-size: 2rem;"></i>
                <h2>@ViewData["TodaysBorrow"]</h2>
                <p>Today's Borrow</p>
            </div>
        </div>
    </div>
</div>
@* Recent Borrow Records *@
<div class="text-center mt-4 mb-3">
    <h1 classs=" "> Recent Borrow Records </h1>
</div>

<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Book</th>
                <th>Member</th>
                <th>Date</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            @{
                var recentBorrows = (List<BorrowRecord>)ViewData["RecentBorrows"];
            }

            @if (recentBorrows.Any())
            {
                @foreach (var record in recentBorrows)
                {
                    <tr>
                        <td>@record.Book?.Title</td>
                        <td>@record.Member?.Name</td>
                        <td>@record.BorrowDate.ToString("yyyy-MM-dd")</td>
                        <td>
                            @if (record.ReturnDate == null)
                            {
                                <span class="badge bg-warning">Borrowed</span>
                            }
                            else
                            {
                                <span class="badge bg-success">Returned</span>
                            }
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="4" class="text-center py-5 text-muted">
                        <i class="bi bi-inbox" style="font-size: 3rem;"></i>
                        <p class="mt-3">No borrow records yet.</p>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    @* Quick Actions *@
    <div class="text-center mt-5 mb-3">
        <h3>Quick Actions</h3>
    </div>

    <div class="d-flex justify-content-center gap-3 mb-5">
        <a asp-controller="Books" asp-action="Create" class="btn btn-primary btn-lg">
            <i class="bi bi-book"></i> Add New Book
        </a>
        <a asp-controller="Members" asp-action="Create" class="btn btn-success btn-lg">
            <i class="bi bi-person-plus"></i> Add New Member
        </a>
        <a asp-controller="BorrowRecords" asp-action="Create" class="btn btn-info btn-lg">
            <i class="bi bi-arrow-left-right"></i> Borrow Book
        </a>
    </div>
</div>